<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
				<title>예치금 환불</title>
	</th:block>
	<th:block layout:fragment="Contents">
		<div id="container-header-title"><strong>예치금 환불</strong></div>
		<div id="container-header-path">
			<a href="/" style="text-decoration: none;"> 메인화면 </a>>
			<a href="#" style="text-decoration: none;">구매관리 </a>>
			<a href="/buy/applyRefund" style="text-decoration: none;"> 예치금 환불 </a>
		</div>
		<div id="container-header-space"></div>
		<div class="row mt">
          <div class="col-md-12 container">
            <div class="content-panel">
              <table class="table table-striped table-advance table-hover">
                <h4><i class="fa fa-angle-right"></i>예치금 환불가능 목록</h4>
                <hr>
                <thead>
                  <tr>
                    <th class="col-md-1">번호</th>
                    <th class="col-md-5"><i class="fa fa-bullhorn"></i>공고 제목</th>
                    <th class="col-md-1"><i class="fa fa-bullhorn"></i>품목</th>
                    <th class="col-md-2"><i class="fa fa-bullhorn"></i>예치금</th>
       	            <th class="col-md-3"><i class="fa fa-bookmark"></i>입찰신청 날짜 </th>
                  </tr>
                </thead>
                <tbody>
                	<th:block th:if="${refundList!=null}">
	                	<th:block th:if="${refundList.size()>0 and refundList.RefundPossibleList.size()>0}" th:each="l,index:${refundList.RefundPossibleList}">
			                  <tr>
			                    <td>[[${index.count}]]</td>
			                    <td>
			                    	<form th:action="@{/buy/refundRequest}" method="post">
				                      	<a class="announceTitle">[[${l.bTitle}]]</a>
				                      	<input th:if="${l.bTypeCode=='1'}" type="hidden" name="bType" th:value="${'발전소'}">
			                    		<input th:if="${l.bTypeCode=='2'}" type="hidden" name="bType" th:value="${'부품'}">
				                      	<input type="hidden" name="bTitle" th:value="${l.bTitle}">
				                      	<input type="hidden" name="bCode" th:value="${l.bCode}">
				                      	<input type="hidden" name="bDeposit" th:value="${l.bDeposit}">
			                   		</form>
			                    </td>
			                    <td th:if="${l.bTypeCode=='1'}">발전소</td>
			                    <td th:if="${l.bTypeCode=='2'}">부품</td>
			                    <td class="price">[[${l.bDeposit}]]</td>
			                    <td>[[${l.bDate}]]</td>
			                    
			                  </tr>
	                	</th:block>
                	</th:block>
                	<th:block th:if="${refundList==null or refundList.size()==0 or refundList.RefundPossibleList.size()==0}">
		                  <tr>
		                    <td colspan="5" style="text-align: center;">환불 가능한 목록이 없습니다.</td>		                 
		                  </tr>
                	</th:block>
                </tbody>
              </table>
            </div>
          </div>
        </div>
		<div class="row mt">
          <div class="col-md-12 container">
            <div class="content-panel">
              <table class="table table-striped table-advance table-hover">
                <h4><i class="fa fa-angle-right"></i> 예치금 환불완료 목록</h4>
                <hr>
                <thead>
                  <tr>
                    <th class="col-md-1">번호</th>
                    <th class="col-md-5"><i class="fa fa-bullhorn"></i>공고 제목</th>
                    <th class="col-md-1"><i class="fa fa-bullhorn"></i>품목</th>
                    <th class="col-md-2"><i class="fa fa-bullhorn"></i>예치금</th>
       	            <th class="col-md-3"><i class="fa fa-bookmark"></i>환불완료 날짜 </th>
                  </tr>
                </thead>
                <tbody>
                	<th:block th:if="${refundList!=null}">
	                	<th:block th:if="${refundList.size>0 and refundList.RefundCompleteList.size()>0}" th:each="l,index:${refundList.RefundCompleteList}">
			                  <tr>
			                    <td>[[${index.count}]]</td>
			                    <td>
			                    	<form th:action="@{/buy/refundResult}" method="post">
			                    		<input th:if="${l.bTypeCode=='1'}" type="hidden" name="bType" th:value="${'발전소'}">
			                    		<input th:if="${l.bTypeCode=='2'}" type="hidden" name="bType" th:value="${'부품'}">
			                    		<input type="hidden" name="bTitle" th:value="${l.bTitle}">
			                    		<input type="hidden" name="bCode" th:value="${l.bCode}">
				                      	<a class="announceTitle">[[${l.bTitle}]]</a>
			                   		</form>
			                   	</td>
			                   	<td th:if="${l.bTypeCode=='1'}">발전소</td>
			                    <td th:if="${l.bTypeCode=='2'}">부품</td>
			                    <td class="price">[[${l.bDeposit}]]</td>
			                    <td>[[${l.tradeDepositOutDTO.trDepWdDate}]]</td>
			                    
			                  </tr>
	                	</th:block>
                	</th:block>
                	<th:block th:if="${refundList==null or refundList.size()==0 or refundList.RefundCompleteList.size()==0}">
		                  <tr>
		                    <td colspan="5" style="text-align: center;">환불 완료한 목록이 없습니다.</td>		                 
		                  </tr>
                	</th:block>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
		<div class="row mt">
          <div class="col-md-12 container">
            <div class="content-panel">
              <table class="table table-striped table-advance table-hover">
                <h4><i class="fa fa-angle-right"></i> 예치금 환불신청 목록</h4>
                <hr>
                <thead>
                  <tr>
                    <th class="col-md-1">번호</th>
                    <th class="col-md-5"><i class="fa fa-bullhorn"></i>공고 제목</th>
                    <th class="col-md-1"><i class="fa fa-bullhorn"></i>품목</th>
                    <th class="col-md-2"><i class="fa fa-bullhorn"></i>예치금</th>
       	            <th class="col-md-3"><i class="fa fa-bookmark"></i>환불신청 날짜 </th>
                  </tr>
                </thead>
                <tbody>
                	<th:block th:if="${refundList!=null}">
	                	<th:block th:if="${refundList.size>0 and refundList.RefundRequestList.size()>0}" th:each="l,index:${refundList.RefundRequestList}">
			                  <tr>
			                    <td>[[${index.count}]]</td>
			                    <td>
			                    	<form th:action="@{/buy/refundInfo}" method="post">
			                    		<input th:if="${l.bTypeCode=='1'}" type="hidden" name="bType" th:value="${'발전소'}">
			                    		<input th:if="${l.bTypeCode=='2'}" type="hidden" name="bType" th:value="${'부품'}">
			                    		<input type="hidden" name="bTitle" th:value="${l.bTitle}">
			                    		<input type="hidden" name="bCode" th:value="${l.bCode}">
				                    	<a class="announceTitle">[[${l.bTitle}]]</a>
			                   		</form>
			                   	</td>
			                   	<td th:if="${l.bTypeCode=='1'}">발전소</td>
			                    <td th:if="${l.bTypeCode=='2'}">부품</td>
			                    <td class="price">[[${l.bDeposit}]]</td>
			                    <td>[[${l.tradeDepositOutDTO.trDepDate}]]</td>
			                  </tr>
	                	</th:block>
                	</th:block>
                	<th:block th:if="${refundList==null or refundList.size()==0 or refundList.RefundRequestList.size()==0}">
		                  <tr>
		                    <td colspan="5" style="text-align: center;">환불 신청한 목록이 없습니다.</td>		                 
		                  </tr>
                	</th:block>
                </tbody>
              </table>
            </div>
          </div>
        </div>
	</th:block>
	<th:block layout:fragment="customScript">
		
		
		<script type="text/javascript">
			var buy = $('#buy');
			buy.addClass('active');
			buy.parent().find('.sub').css('display','block');
			buy.parent().find('.sub').children().eq(1).addClass('active');
			
			$('.announceTitle').click(function(){
				$(this).parent().submit();
			});
			
			$(function(){
				var price = $('.price');
				price.each(function(){
					$(this).text($(this).text().toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				})
			})
			
		</script>
	</th:block>
</html>