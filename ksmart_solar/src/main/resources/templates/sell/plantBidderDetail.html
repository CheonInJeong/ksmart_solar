<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
				<title>테스트</title>
	</th:block>
	<th:block layout:fragment="Contents">
		<div id="container-header-title"><strong>내공고목록</strong></div>
     	<div id="container-header-path">판매관리 > <a th:href="@{/sell/myHistory}">내공고목록</a> ><!--  <a th:href="@{/sell/plantBidderList}">입찰자목록</a> > --> 입찰자 정보</div>
      	<div id="container-header-space"></div>		
	
		<div class="row mt">
          <div class="col-md-12">
            <div class="content-panel">
              <h4><i class="fa fa-angle-right"></i>입찰자 정보</h4>
              <hr>
              <table class="table">
              	<tr>
              		<td>아이디</td>
              		<td th:text="${member.businessDTO.mId}"><td>
              	</tr>
              	<tr>
              		<td>회사명</td>
              		<td th:text="${member.businessDTO.bzCompanyName}"></td>
              	</tr>
              	<tr>
              		<td>대표명</td>
              		<td th:text="${member.businessDTO.bzCeoName}"></td>
              	</tr>
              	<tr>
              		<td>회사소재지</td>
              		<td>[[${member.businessDTO.bzZipcode}]] [[${member.businessDTO.bzAddr}]] [[${member.businessDTO.bzDetailAddr}]]</td>
              	</tr>
              </table>
            </div>
          </div>
        </div>
        
       <div class="row mt">
          <div class="col-md-12">
            <div class="content-panel">
              <h4><i class="fa fa-angle-right"></i>입찰 정보</h4>
              <hr>
              <table class="table">
              	<tr>
              		<td>입찰코드</td>
              		<td th:text ="${member.bCode}" id="bCode"></td>
              	</tr>
              	<tr>
              		<td>제시가격</td>
              		<td th:text="${member.bPrice}"><td>
              	</tr>
              	<tr>
              		<td>입찰서류</td>
              		<td>가격제안서(입찰서).hwp</td>
              		<td>입찰참가신청서.hwp</td>
              	</tr>
              	<tr>
              		<td>서류적합여부</td>
              		<td class="documentYn" th:text="${member.bCheck}"></td>
              		<td><button type="button" class="btn btn-default" id="documentYnBtn" data-attr="0">수정</button></td>
              	</tr>
              </table>
            </div>
          </div>
        </div>
        
	</th:block>
	<th:block layout:fragment="customScript">
		<script type="text/javascript">
			var sell = $('#sell');
			sell.addClass('active');
			sell.parent().find('.sub').css('display','block');
			sell.parent().find('.sub').children().eq(1).addClass('active');
		</script>
			
		<script>
			$('#documentYnBtn').click(function(){
				var documentYn =$('.documentYn');
				var checkedValue;
				var code = $('#bCode').text();
				
				if($('#documentYnBtn').attr('data-attr')=='0'){
					
					if(documentYn.text()=='Y'){
						documentYn.html('적합 <input type="radio" class="documentYn" name="bCheck" value="Y" checked> 비적합  <input type="radio" class="documentYn" name="bCheck" value="N">');
					}else{
						documentYn.html('적합 <input type="radio" class="documentYn" name="bCheck" value="Y"> 비적합  <input type="radio" class="documentYn" name="bCheck" value="N" checked>');
					}
					
					$(this).attr('data-attr',1);
					$(this).text('수정완료');

					 
				}else if($(this).attr('data-attr')=='1'){
					checkedValue=$(':input:radio[name="bCheck"]:checked').val();
					$.ajax({
					url : '/ajax/modifyDocumentCheck',
         			type : 'POST',
         			data : {documentYn : checkedValue,bCode : code},
         			success : function(data){
         				documentYn.html('');
         				documentYn.text(data);
         			},
         			error :function(request,status,error){
         			    alert("code:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
         		   }
				})
					
					
					$(this).attr('data-attr',0);
					
					$(this).text('수정');
				}
			
				
			})
			
		</script>
	</th:block>
</html>