<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">

	<th:block layout:fragment="customTitle">
		<title>발전소 리스트</title>
	</th:block>
	<th:block layout:fragment="Contents">
		<div hidden="">
			스크립트에서 사용하기 위한 세션 변수 세팅
			<div id="sessionID" th:data-session-id="${session.SID}"></div>
			<div id="sessionNAME" th:data-session-name="${session.SNAME}"></div>
			<div id="sessionLEVEL" th:data-session-level="${session.SLEVEL}"></div>
		</div>
		<div id="container-header-title"><strong>발전소 리스트</strong></div>
		<div id="container-header-path">
			<a href="/">메인화면 </a>>
			<a href="/plant/plantList"> 내 발전소 관리 </a>>
			<a href="/plant/plantList"> 발전소 리스트 </a>
		</div>
		<div id="container-header-space"></div>
			<div class="row mt col-xs-12" style="padding-bottom: 30px; margin:0 auto; color: #111; font-size: 17px;">
				<div>
					<div class="col-sm-6 col-sm-offset-6 col-md-3 col-md-offset-9">
						<input type="button" id="addPlant" class="btn btn-md addPlant col-xs-12" value="발전소 추가등록" style="background-color: #4ECDC4; color: #fff; font-weight: 500;">
					</div><div style="height: 5vh;"></div>
				</div>
				<div th:if="${#lists.size(plantListById) > 0}" th:each="l : ${plantListById}">
				  <div th:if="${l.bzPlCheck} eq 'Y' and ${l.bzPlDelete} eq 'N'">
				  <div class="col-sm-6 col-md-3">
				    <div class="thumbnail">
				    <div class="thumbnail-wrapper1"> <div class="thumbnail1"> <div class="centered">
					  <a style="cursor: pointer;"><img alt="발전소 사진" th:src="${l.bzPlPhoto}" class="plantImg" th:data-bzCode="${l.bzPlCode}"></a>
				    </div></div></div>
				      <div class="caption">
				        <h3 style="font-weight: 600;">[[${l.bzPlName}]]</h3>
				        <div>
				        	<div>
				        		<strong>발전소용량</strong>
				        		<p>[[${l.bzPlPower}]] [kW]</p>
				        	</div>
				        	<div>
				        		<strong>발전소주소</strong>
				        		<p>([[${l.bzPlZipcode}]]) [[${l.bzPlAddr}]] [[${l.bzPlDetailAddr}]]</p>
				        	</div>
				        </div>
				        <div>
				        </div>
				      </div>
				    </div>
				  </div>
				  </div>
				</div>
				<div th:unless="${#lists.size(plantListById) > 0}">
					<div class="content-panel col-xs-12" style="min-height: 80vh; text-align: center;">
						<h2>조회된 내용이 없습니다.</h2>
						<h4>(발전소 등록을 해주세요.)</h4>
					</div>
				</div>
			</div>
		<!-- 클릭한 발전소의 코드를 전송 -->
		<form id="bzCodeForm" method="post" hidden="" action="/plant/plantDetail">
			<input id="bzCode" name="bzCode" value="">
		</form>
	<th:block layout:fragment="customScript">
		<script src="/js/plant.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				var sessionID = $('#sessionID').attr('data-session-id');
				var sessionNAME = $('#sessionNAME').attr('data-session-name');
				var sessionLEVEL = $('#sessionLEVEL').attr('data-session-level');
				if(sessionLEVEL == '관리자'){
					
				}else if(sessionLEVEL == '태양광사업자'){
					
				}else if(sessionLEVEL == '일반사업자'){
					//메인화면으로 이동
					document.location.href = '/';
				}else if(sessionLEVEL == '일반회원'){
					//메인화면으로 이동
					document.location.href = '/';
				}else{
					//메인화면으로 이동
					document.location.href = '/';
				}
			});
			$('#plantDetailMove').click(function(){
				document.location.href = '/plant/plantDetail';
			});
			$('.plantImg').click(function(){
				console.log(this);
				var code = $(this).attr('data-bzCode');
				$('#bzCode').val(code);
				console.log($('#bzCode').val());
				$('#bzCodeForm').submit();
			});
			
		</script>
	</th:block>
	
</html>