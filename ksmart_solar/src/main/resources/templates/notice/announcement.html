<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
				<title>공고정보</title>
	</th:block>
	<th:block layout:fragment="Contents">
		<form id="bidComponentForm" action="/notice/bidRequest" method="post">
			<div class="chat-room mt" th:if="${bidComponentdto!=null}">
				<input type="hidden" name="announcedCode" th:value="${bidComponentdto.bCpCode}">
				<input type="hidden" name="announcedTitle" th:value="${bidComponentdto.bCpTitle}">
				<input type="hidden" name="announcedPrice" th:value="${bidComponentdto.bCpPrice}">
				<input type="hidden" name="announcedType" th:value="${2}">
			
	          <div class="mid-side container">
	          	<div class="row">
		            <div class="chat-room-head">
		              <h3>부품 공고</h3>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">공고 제목</div>
		              <div class="second-part" th:text="${bidComponentdto.bCpTitle}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">입찰 시작가</div>
		              <div class="second-part" th:text="${bidComponentdto.bCpPrice}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">부품 사용 시작일</div>
		              <div class="second-part" th:text="${bidComponentdto.cpUsedate}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">입찰 신청기간</div>
		              <div class="second-part" th:text="${bidComponentdto.bCpDateBidding1+'   ~   '+bidComponentdto.bCpDateBidding2}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">낙찰자 결정 기간</div>
		              <div class="second-part" th:text="${bidComponentdto.bCpDateDecision1+'   ~   '+bidComponentdto.bCpDateDecision2}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">진행 상태</div>
		              <div class="second-part" th:text="${bidComponentdto.bCpStatus}"></div>
		            </div>
	            </div>
	          </div>
	        </div>
	    </form>
        
        <form id="bidPlantForm" action="/notice/bidRequest" method="post">
			<div class="chat-room mt" th:if="${bidPlantdto!=null}">
				<input type="hidden" name="announcedCode" th:value="${bidPlantdto.bPlCode}">
				<input type="hidden" name="announcedTitle" th:value="${bidPlantdto.bPlTitle}">
				<input type="hidden" name="announcedPrice" th:value="${bidPlantdto.bPlPrice}">
				<input type="hidden" name="announcedType" th:value="${1}">
	          <div class="mid-side container">
	          	<div class="row">
		            <div class="chat-room-head">
		              <h3>발전소 공고</h3>
		            </div>
		             <div class="group-rom">
		              <div class="first-part odd">공고 제목</div>
		              <div class="second-part" th:text="${bidPlantdto.bPlTitle}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">입찰 시작가</div>
		              <div class="second-part" th:text="${bidPlantdto.bPlPrice}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">잔존 가치</div>
		              <div class="second-part" th:text="${bidPlantdto.plDepDataResidual}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">입찰 신청기간</div>
		              <div class="second-part" th:text="${bidPlantdto.bPlDateBidding1+'   ~   '+bidPlantdto.bPlDateBidding2}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">낙찰자 결정 기간</div>
		              <div class="second-part" th:text="${bidPlantdto.bPlDateDecision1+'   ~   '+bidPlantdto.bPlDateDecision2}"></div>
		            </div>
		            <div class="group-rom">
		              <div class="first-part odd">진행 상태</div>
		              <div class="second-part" th:text="${bidPlantdto.bPlStatus}"></div>
		            </div>
	            </div>
	          </div>
	        </div>
        </form>
        <div th:include="notice/plantInfo :: plantInfoFragment" 
        	 th:if="${bidPlantdto!=null}"></div>
        <div th:include="notice/componentInfo :: componentInfoFragment" 
        	 th:if="${bidComponentdto!=null}"></div>
        <div th:include="notice/bidResult :: bidResultFragment" 
        	 th:if="${getBidListCount!=0}"></div>
		<div class="row" style="margin: 5px 0px;">
			<div class="form-inline" style="text-align: center;">
				<div class="form-group" th:if="${bidComponentdto != null and bidComponentdto.acStatusCode==4 and getBidListCount==0}">
			 		<button id="bidComponentBtn" class="btn btn-default">입찰신청</button>
				</div>
				
				<div class="form-group" th:if="${bidPlantdto != null and bidPlantdto.acStatusCode==4 and getBidListCount==0}">
			 		<button id="bidPlantBtn" class="btn btn-default">입찰신청</button>
				</div>
				
	        	<a class="form-group" id="returnPage">
		        	<button class="btn btn-default center-block" type="button" >돌아가기</button>
	        	</a>
			</div>
		</div>
	</th:block>
	
	<th:block layout:fragment="customScript">
		<script type="text/javascript">
			var link = document.referrer;
			$('#returnPage').attr('href',link);
			var linkArr = link.split('/');
			console.log(linkArr[linkArr.length-1]);
			if(linkArr[linkArr.length-1]=='myHistory'){
				var buy = $('#buy');
				buy.addClass('active');
				buy.parent().find('.sub').css('display','block');
				buy.parent().find('.sub').children().eq(0).addClass('active');			
			}
			if(linkArr[linkArr.length-1]=='noticeList'){
				var notice = $('#notice');
				notice.addClass('active');
				notice.parent().find('.sub').css('display','block');
				notice.parent().find('.sub').children().eq(0).addClass('active');			
			}
			if(linkArr[linkArr.length-1]=='history'){
				var notice = $('#notice');
				notice.addClass('active');
				notice.parent().find('.sub').css('display','block');
				notice.parent().find('.sub').children().eq(1).addClass('active');			
			}
			
			$('#bidComponentBtn').click(function(){
				$('#bidComponentForm').submit();
			});
			$('#bidPlantBtn').click(function(){
				$('#bidPlantForm').submit();
			});
		</script>
	</th:block>
</html>