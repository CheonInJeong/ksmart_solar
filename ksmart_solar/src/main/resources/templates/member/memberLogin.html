<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
				<title>테스트</title>
	</th:block>
	<th:block layout:fragment="Contents">
		<div id="signInContents" class="container" style="color: #111; font-size: 17px; height: 100vh">
			<div style="height: 8vh;"></div>
			<h1 style="text-align: center;">로 그 인</h1>
			<div class="row col-md-6 col-md-offset-3">
				<div class="form-group">
				  <input type="text" readonly="readonly" hidden="hidden" id="memberCodeCheckValue" value="">
				  <label for="memberId" style="margin-top: 13px;">아이디</label><br>
				  <input type="text" class="form-control" id="memberId" placeholder="아이디를 입력하세요" >
				</div>
				<div class="form-group">
				  <label for="memberPassword">비밀번호</label>
				  <input type="password" class="form-control" id="memberPassword" placeholder="비밀번호를 입력하세요.">
				</div><br>
				<button id="signInBtn" type="button" class="btn btn-success btn-lg col-xs-12" onclick="signInSubmit()">로 그 인</button>
				<div style="height: 15vh;"></div>
				<div class="row">
					<form th:action="@{/login/manager}" method="get"><button id="" type="submit" class="btn btn-default btn-lg col-xs-10 col-xs-offset-1" style="margin-bottom: 20px;">관리자로그인</button></form>
					<form th:action="@{/login/solar}" method="get"><button id="" type="submit" class="btn btn-default btn-lg col-xs-10 col-xs-offset-1" style="margin-bottom: 20px;">태양광사업자</button></form>
					<form th:action="@{/login/recycle}" method="get"><button id="" type="submit" class="btn btn-default btn-lg col-xs-10 col-xs-offset-1">재활용사업자</button></form>
				</div>
			</div>
		</div>
	</th:block>
	<th:block layout:fragment="customScript">
	<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
		<script type="text/javascript">
		$('#signInBtn').click(function(){
			
			//아이디, 비밀번호 입력 확인
			var mId = $('#memberId').val();
			var mPw = $('#memberPassword').val();
			if(mId == null || mId == "" || mId == 'undefined'){
				Swal.fire({
					  title: '아이디를 입력해주세요!',
					  icon: 'info'
					})
				$('#memberId').focus();
				return;
			}else if(mPw == null || mPw == "" || mPw == 'undefined'){
				Swal.fire({
					  title: '비밀번호를 입력해주세요!',
					  icon: 'info'
					})
				$('#memberPassword').focus();
				return;
			}
			
			
			$.ajax({
		        url     : '/ajax/login',
		        type    : 'POST',
		        data    : {mId:mId, mPw:mPw},
		        success : function(data) {
		        	console.log(data);
		        	if(data == '로그인완료'){
		        		Swal.fire({
							  title: '로그인 성공!',
							  icon: 'success'
							});
		        		document.location.href = '/';
		        	}else{
		        		Swal.fire({
							  title: '로그인실패!',
							  text: '아이디나 비밀번호가 잘못입력 되었습니다.',
							  icon: 'error'
							});
		        	}
		        },
		        error : function(xhr,status,error) {
		        	console.log("xhr: " + xhr);
		        	console.log("status: " + status);
		        	console.log("error: " + error);
		        }
		    });
		});
		</script>
	</th:block>
</html>