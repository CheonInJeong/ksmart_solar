<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="@{layout/default}">

	<th:block layout:fragment="customTitle">
				<title>회원로그인기록조회</title>
	</th:block>
	
	<th:block layout:fragment="customCss">
	  <link th:href="@{/lib/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
	  <!--external css-->
	  <link th:href="@{/lib/font-awesome/css/font-awesome.css}" rel="stylesheet" />
	  <!-- Custom styles for this template -->
	  <link th:href="@{/css/style.css}" rel="stylesheet">
	  <link th:href="@{/css/style-responsive.css}" rel="stylesheet">
	  <link th:href="@{/css/table-responsive.css}" rel="stylesheet">
		<link th:href="@{/css/style.css}" rel="stylesheet">
		<link th:href="@{/css/style-responsive.css}" rel="stylesheet">
	</th:block>
	
	<th:block layout:fragment="Contents">
	<div id="container-header-title"><strong>회원로그인기록조회</strong></div>
	<div id="container-header-path">
	<a th:href="@{/}">메인화면</a> > 
	회원관리 > 회원로그인기록조회</div>
	<div id="container-header-space"></div>
		<div class="row mt">
          <div class="col-lg-12">
            <div class="content-panel" style="padding : 30px;">
				<h4><i class="fa fa-angle-right"></i> 회원로그인기록조회</h4>
				<div style="text-align : right; margin-bottom: 10px;">
	              <form th:action="@{/member/memberLoginHistory}">
	            	<select name="searchKeyL">
	            		<option value="">카테고리</option>
	            		<option value="mId">아이디</option>
	            		<option value="mLogIn">로그인 일자</option>
	            		<option value="mLogOut">로그아웃 일자</option>
	            	</select>
	            	<input type="text" placeholder="검색어" name="searchValueL" th:value="${searchValueL}">
	            	<input type="date" name="searchValueLS" th:value="${searchValueLS}" style="display: none">
	            	<input type="date" name="searchValueLF" th:value="${searchValueLF}" style="display: none">
	            	<input type="submit" value = "검색" class="btn btn-default btn-sm">
	              </form>
            	</div>
	              <section id="no-more-tables">
	              	<hr>
	              	<table class="table table-condensed cf">
	                  <thead class="cf">
						<tr>
							<th>번호</th>
							<th>아이디</th>
							<th>로그인 시간</th>
							<th>로그아웃 시간</th>
						</tr>
					</thead>
					<tbody>
						<tr th:if="${#lists.size(loginHistoryList) > 0}" th:each="l, status : ${loginHistoryList}">
							<td data-title="번호" th:text="${status.count+(page.curPage-1)*page.pageEnd}"></td>
							<td data-title="아이디" th:text="${l.mId}"></td>
							<td data-title="로그인 시간" th:text="${l.mLogIn}"></td>
							<td data-title="로그아웃 시간" th:text="${l.mLogOut}"></td>
						</tr>
						<tr th:unless="${#lists.size(loginHistoryList) > 0}">
							<td colspan="4">조회된 내용이 없습니다.</td>
						</tr>
					</tbody>
					</table>
						<div class="text-center">
						  <ul class="pagination">
						    <li>
						      <a th:if="${page.curBlock > 1}" th:href="@{/member/memberLoginHistory(curPage=${page.prevPage},searchKeyL=${searchKeyL},searchValueL=${searchValueL},searchValueLS=${searchValueLS},searchValueLF=${searchValueLF})}" aria-label="Previous">
						        <span aria-hidden="true">&laquo;</span>
						      </a>
						    </li>
					    	<th:block th:each="num : ${#numbers.sequence(page.blockBegin, page.blockEnd)}">
					   		<li th:if="${num == page.curPage}" class="active">
					   			<a>[[${num}]]</a>
					   		</li>
					   		<li th:unless="${num == page.curPage}">
					   		<th:block th:if="${num} != 0">
					   			<a th:href="@{/member/memberLoginHistory(curPage=${num},searchKeyL=${searchKeyL},searchValueL=${searchValueL},searchValueLS=${searchValueLS},searchValueLF=${searchValueLF})}">[[${num}]]</a>
					   		</th:block>
					   		</li>
					  		</th:block>
						    <li>
						      <a th:if="${page.curBlock <= page.totBlock}" th:href="@{/member/memberLoginHistory(curPage=${page.nextPage},searchKeyL=${searchKeyL},searchValueL=${searchValueL},searchValueLS=${searchValueLS},searchValueLF=${searchValueLF})}" aria-label="Next">
						        <span aria-hidden="true">&raquo;</span>
						      </a>
						    </li>
						  </ul>
						</div>
	              </section>
				</div>
			</div>
		</div>
	</th:block>
	<th:block layout:fragment="customScript">
	<script th:src="@{/lib/jquery-ui-1.9.2.custom.min.js}"></script>
	  <script type="text/javascript" th:src="@{/lib/bootstrap-datepicker/js/bootstrap-datepicker.js}"></script>
	  <script type="text/javascript" th:src="@{/lib/bootstrap-daterangepicker/date.js}"></script>
	  <script type="text/javascript" th:src="@{/lib/bootstrap-daterangepicker/daterangepicker.js}"></script>
	  <script src="lib/advanced-form-components.js"></script>
		<script type="text/javascript">
			var member = $('#member');
			member.addClass('active');
			member.parent().find('.sub').css('display','block');
			member.parent().find('.sub').children().eq(1).addClass('active');
			
			var searchKeyL = $('select[name="searchKeyL"]');
			searchKeyL.click(function(){
				if(searchKeyL.val() == "mLogIn" || searchKeyL.val() == "mLogOut"){
					$('[name="searchValueL"]').css('display','none');
					$('[name="searchValueLS"]').css('display','inline-block');
					$('[name="searchValueLF"]').css('display','inline-block');
				}else{
					$('[name="searchValueL"]').css('display','inline-block')
					$('[name="searchValueLS"]').css('display','none');
					$('[name="searchValueLF"]').css('display','none');
				}
			});
		</script>
	</th:block>
</html>