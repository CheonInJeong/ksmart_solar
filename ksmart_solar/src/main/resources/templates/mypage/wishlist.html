<!DOCTYPE html>
<html xmlns:th="http://www.tyhmeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="layout/default">

	<th:block layout:fragment="customTitle">
		<title>관심목록</title>
	</th:block>

	<th:block layout:fragment="customCss">
		<style>
		th, tbody {
			text-align:center;
		}
		</style>			
	</th:block>
	
	<th:block layout:fragment="Contents">
		<div id="container-header-title"><strong>관심목록</strong></div>
		<div id="container-header-path">
	   		<a href="/" style="text-decoration: none;"> 메인화면 </a>> MY PAGE > 
	   		<a href="/mypage/wishlist" style="text-decoration: none;"> 내 관심목록 </a>
		</div>
		<div id="container-header-space"></div>
		<div class="row mt">
          <div class="col-md-12 container">
             <div class="content-panel" style="padding: 30px;">
              <table class="table table-striped table-advance table-hover">
                <h4><i class="fa fa-angle-right"></i> 찜한공고</h4>
                <hr>
                <thead>
                  <tr>
                    <th class="col-md-2">공고 코드</th>
                    <th class="col-md-4"><i class="fa fa-bullhorn"></i> 공고 제목</th>
                    <th class="col-md-2"><i class="fa fa-question-circle"></i>입찰 시작가</th>
                    <th class="col-md-2"><i class="fa fa-bookmark"></i>입찰 마감일 </th>
                    <th class="col-md-2">삭제 </th>
                  </tr>
                </thead>
                <tbody>
                	<th:block th:if="${picPlkDTOList != null}" th:each="l:${picPlkDTOList}">
	                	<tr>
		                    <td data-title="공고 코드" th:text="${l.pCode}"></td>
		                    <td>
		                    	<form th:action="@{/notice/announcement}" method="get">
			                		<a class="announceTitle" style="cursor: pointer" th:text="${l.bidPlantDTO.bPlTitle}"></a>
			                		<input type="hidden" name="announceCode" th:value="${l.pCode}">
			                      	<input type="hidden" name="announceType" value="발전소">
		                    	</form>
		                    </td>
		                    <td class="price" data-title="입찰 시작가" th:text="${l.bidPlantDTO.bPlPrice}"></td>
		                    <td data-title="입찰 마감일" th:text="${l.bidPlantDTO.bPlDateBidding2}"></td>
							<td data-title="삭제">
								<a class="btn btn-danger btn-xs" th:href="@{/mypage/removeWishlist(pIdx=${l.pIdx})}">삭제</a>
							</td>
	                	</tr>
                	</th:block>
                	<th:block th:if="${pickCpDTOList != null}" th:each="l:${pickCpDTOList}">
	                	<tr>
		                    <td data-title="공고 코드" th:text="${l.pCode}"></td>
		                    <td>
		                    	<form th:action="@{/notice/announcement}" method="post">
			                		<a class="announceTitle">[[${l.bidComponentDTO.bCpTitle}]]</a>
			                		<input type="hidden" name="announceCode" th:value="${l.pCode}">
			                      	<input type="hidden" name="announceType" value="부품">
		                    	</form>
		                    </td>
		                    <td data-title="입찰 시작가" th:text="${l.bidComponentDTO.bCpPrice}"></td>
		                    <td data-title="입찰 마감일" th:text="${l.bidComponentDTO.bCpDateBidding2}"></td>
							<td data-title="삭제">
								<a th:href="@{/mypage/removeWishlist(pIdx=${l.pIdx})}">삭제</a>
							</td>
	                	</tr>
                	</th:block>
                	<th:block th:if="${picPlkDTOList == null && picPlkDTOList.size() == 0 && pickCpDTOList == null && pickCpDTOList.size() == 0}">
		                  <tr>
		                    <td colspan="5" style="text-align: center;">찜한 공고가 없습니다.</td>		                 
		                  </tr>
                	</th:block>
                </tbody>
              </table>
            </div>
          </div>
        </div>
        
        
        
        
	</th:block>
	<th:block layout:fragment="customScript">
		<script type="text/javascript">
			var mypage = $('#mypage');
			mypage.addClass('active');
			mypage.parent().find('.sub').css('display','block');
			mypage.parent().find('.sub').children().eq(2).addClass('active');
			
			//상세조회
			$('.announceTitle').click(function(){
				$(this).parent().submit();
			});
			
			//콤마
				$(function(){
				var price = $('.price');
				price.each(function(){
					$(this).text($(this).text().toString().replace(/\B(?=(\d{3})+(?!\d))/g, ','));
				})
			})
			
		</script>
	</th:block>
	
	
</html>